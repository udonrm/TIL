# 制御フロー

## 条件付き三項演算子

3 つのオペランドを op1, op2, op3 とすると、疑問符 (?) とコロン (:) を用いて、以下のように表現される

```text
op1 ? op2 : op3
```

op1 が true の時 op2 を返して false の時 op3 を返す

```php
<?php
function isEven($n){
    return ($n % 2 == 0) ? "The number" . $n . "is even" : "The number" . $n . "is odd";
}
```

## Q ポートレートモード

```php
<?php

function screenViewMode(int $height, int $width): string{
    // 関数を完成させてください
    return $height >= $width ? "portrait" : "landscape";
}
```

```python
def screenViewMode(height, width):
    return "portrait" if height >= width else "landscape"
```

```php
//入れ子構造での三項演算子
<?php
function monsterAttackExpressionNest($monster){
    $attack = 1000;
    $message = "'s attack is:";

    //op1 ? op2 : (op3 ? op4 : op5)
    return $monster == "Cyclops" ? "Cyclops" . $message . $attack*1.8 : ($monster == "Orge" ? "Orge" . $message . $attack*2.5 :($monster == "Zombie" ?  "Zombie" . $message . $attack*1.2 : "Monster does not exist."));
}
```

## for 文

```php
for(初期化; 条件; ループの最後に評価される式){
   ステートメント
}
```

```php
<?php
function countUpToN($n){
    for($i = 0; $i < $n; $i++){
        echo $i . PHP_EOL;
    }
}

function printAllCharacters($str){
    for($i = 0; $i < strlen($str); $i++){
        echo $str[$i] . PHP_EOL;
    }
}
```

```python
# range(min , max) は、min <= i < max の間のすべての数値のリストを生成します
for k in range(0, 5):
    print(k) #0,1,2,3,4

def countUpToN(n):
    for i in range(0, n+1):
        print(i)
```

```php
//総和
<?php
function summationForLoopIteration($n){
    $total = 0;

    for ($i = 1; $i <= $n; $i++){
        $total += $i;
    }

    return $total; //55
}
```

```php
//2で割っていく処理
<?php
function divideBy2CountIteration($n){
    $counter = 0;

    for($temp = $n; $temp > 1; $temp = $temp/$divisor){
        $counter ++; //$nを2で割り切れる回数
    }

    return $counter;
}

function divideByCountIteration($divisor, $n){
    $counter = 0;

    for($temp = $n; $temp > 1; $temp = $temp/$divisor){
        $counter++;
    }

    return $counter;
}
```

```php
<?php
//フィボナッチ数
//再帰
function fibonacciNumberTailHelper($fn1, $fn2, $n){
    if($n < 1){
        return $fn1;
    }
    return fibonacciNumberTailHelper($fn2, $fn1+$fn2, $n-1);
}

function fibonacciNumberTail($n){
    return fibonacciNumberTailHelper(0, 1, $n);
}

//反復
function fibonacciNumberForLoopIteration($n){
    $fn1 = 0;
    $fn2 = 1;

    for ($i = 0; $i < $n; $i++){
        $prevFn1 = $fn1;
        $fn1 = $fn2;
        $fn2 = $prevFn1 + $fn2;
    }

    return $fn1;
}
```

```php
//総和の総和
//for文
// 1 -> summationOf1
// 1 + 2 -> summationOf2
// 1 + 2 + 3 -> summationOf3
// 1 + 2 + 3 + 4 -> summationOf4
// ...

// i 周目で 1 + 2 + ... + i まで足し算を行う
<?php
function simpleSummationOfSummationsNestedIteration($n){
    $total = 0;

    for ($i = 1; $i <= $n; $i++){
        $summationOfI = 0;

        for ($j = 1; $j <= $i; $j++){
            $summationOfI += $j;
        }

        $total += $summationOfI;
    }
    return $total;
}
```

## while 文

述語部分が true の時だけ反復処理が行われる

```php
while(述語){
   ステートメント
}
```

```php
//総和計算
<?php
function summationWhileLoopIteration($n){
    $total = 0;

    while($n >= 0){
        $total += $n;
        $n--;
    }

    return $total;
}
```

## Q3 で割り続ける

```php
<?php

function divideBy3Count(int $n){
    $count = 0;

    while($n % 3 == 0 && $n != 0){
        $n = $n / 3;
        $count++;
    }
    return $count;
}
```

```php
//最大公約数
<?php
function gcdWhileLoopIteration($n1, $n2){
    while($n1 % $n2 != 0){
        $prevN1 = $n1;
        $n1 = $n2;
        $n2 = $prevN1 % $n2;
    }

    //$n1が$n2で割り切れるときループから脱出
    return $n2;
}
```

```php
//数字を分割してたす
<?php
function splitAndAdd(int $digits): int{
    $sum = 0;
    while($digits > 0){
        //1の位の数を足し上げていく
        $sum += $digits % 10;
        //$digitsを更新する
        $digits = floor($digits / 10);
    }

    return $sum;
}
```

```php
//平方根推定
<?php
function isSquareRootCloseEnough($a, $b){
    // 近似精度が 0.01 未満であれば true を返し、0.01％ 以上であれば false を返します
    return abs($a - $b) / $b < 0.0001;
}

function squareRootWhile($x){
    // 1 から推定値をスタートします
    $guess = 1;

    // 条件を満たすまで繰り返し推定値を探し続けます
    // 2 つの値が近いかどうかをチェックします
    //近似精度が0.01未満の間ループ
    while(!isSquareRootCloseEnough($x / $guess, $guess)){
        // 新しい推定値を格納します
        // 新しい推定値は guess と x/guess の平均値で求めます
        $guess = ($guess + $x/$guess)/2;
    }

    return $guess;
}
```

```php
//投資の計算
<?php
function howLongToReachFundGoal(int $capitalMoney, int $goalMoney, int $interest): int{
    $year = 0;

    while($capitalMoney < $goalMoney && $year < 80){
        $capitalMoney *= 1 + $interest/100;
        $goalMoney *= 1 + ($year % 2 == 0 ? 2 : 3)/ 100;
        $year++;
    }

    if ($year > 80) $year = 80;

    return $year;

}
```
